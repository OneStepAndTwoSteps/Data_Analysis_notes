# Box plot

箱形图最大的优点就是不受异常值的影响， __因为箱线图判断异常值的标准以四分位数和四分位距为基础，四分位数具有一定的耐抗性，多达25%的数据可以变得任意远而不会很大地扰动四分位数，所以异常值不会影响箱形图的数据形状，箱线图识别异常值的结果比较客观__ 。

由此可见，箱线图在识别异常值方面有一定的优越性。能够准确稳定地描绘出数据的离散分布情况，同时也利于数据的清洗。

但是当数据分布发生变化候，箱型图不一定可以描述出变化(即箱型图 图像保持不变) __如下图__：

<div align=center><img src="https://raw.githubusercontent.com/OneStepAndTwoSteps/Data_Analysis/master/static/%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/box%20plot/v2-244720b667952f72b74eb4d196989b56_b.gif"/></div>

__7组不同数据，无论其分布怎么改变，用boxplot做出来，都是一模一样的。__


从这个例子中，我们需要掌握一个重要观点： __描述数据，或者解读数据的时候，不能只关注其“集中性”和“离散性”指标（如均数、中位数、标准差、四分位数等），还得关注原始数据的分布形式。__


### 箱型图图解

<div align=center><img src="https://raw.githubusercontent.com/OneStepAndTwoSteps/Data_Analysis/master/static/%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E8%A7%A3/box%20plot/2.png"/></div>


*   __我们一组序列数为例__ 12，15，17，19，20，23，25，28，30，33，34，35，36，37


*   __Q1的计算方式__

    1、确定四分位数的位置。Qi所在位置=i（n+1）/4，其中i=1，2，3。n表示序列中包含的项数。

    2、根据位置，计算相应的四分位数。

    例中：

    Q1所在的位置=（14+1）/4=3.75，也就是我们[四分位数求解的第一种方法 position = (n+1)*p](https://github.com/OneStepAndTwoSteps/Data_Analysis/blob/master/Pandas%E7%A7%91%E5%AD%A6%E8%AE%A1%E7%AE%97%E5%BA%93/README.md#%E5%88%86%E4%BD%8D%E6%95%B0%E8%A7%A3%E9%87%8A)
    
    此时fraction=0.75

    因为我们的 Q1所在的位置 为3.75，所以在 第三项 和 第四项 之间，所以第三项就是i 第四项就是j

    Q1=0.25×第三项+0.75×第四项=0.25×17+0.75×19=18.5；


*   __Q2的计算方式__

    中位数，即一组数由小到大排列处于中间位置的数。若序列数为偶数个，该组的中位数为中间两个数的平均数。

    例中：

    Q2所在的位置=2（14+1）/4=7.5，

    Q2=0.5×第七项+0.5×第八项=0.5×25+0.5×28=26.5



*   __Q3的计算方式__

    计算方法同下四分位数。

    例中：

    Q3所在的位置=3（14+1）/4=11.25，

    Q3=0.75×第十一项+0.25×第十二项=0.75×34+0.25×35=34.25。


*   __上限(图中的最大值)__

    上限是非异常范围内的最大值。

    首先要知道什么是四分位距如何计算的？

    四分位距 IQR = Q3-Q1，那么上限= Q3 + 1.5IQR



*   __下限(图中的最小值)__

    下限是非异常范围内的最小值。

    下限=Q1-1.5IQR


*   __如何分析箱型图__

    1、直观地识别数据集中的异常值(查看离群点)。

    2、判断数据集的数据离散程度和偏向(观察盒子的长度，上下隔间的形状，以及胡须的长度)  

*   __利用箱线图判断数据批的偏态和尾重__ 

    对于标准正态分布的样本，只有极少值为异常值。异常值越多说明尾部越重，自由度越小（即自由变动的量的个数）；

    而偏态表示偏离程度，异常值集中在较小值一侧，则分布呈左偏态；异常值集中在较大值一侧，则分布呈右偏态。
